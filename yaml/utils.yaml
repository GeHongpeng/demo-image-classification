kind: job
metadata:
  name: file-utils
  tag: ''
  hash: ecc95acd56fd5e2bfd074c6602f4256dae72daea
  project: ''
spec:
  command: ''
  args: []
  image: mlrun/mlrun:latest
  volumes: []
  volume_mounts: []
  env: []
  description: ''
  build:
    functionSourceCode: aW1wb3J0IG9zCmltcG9ydCB6aXBmaWxlCmltcG9ydCBqc29uCmZyb20gdGVtcGZpbGUgaW1wb3J0IG1rdGVtcAppbXBvcnQgcGFuZGFzIGFzIHBkCgoKZGVmIG9wZW5fYXJjaGl2ZShjb250ZXh0LCAKICAgICAgICAgICAgICAgICB0YXJnZXRfZGlyPSdjb250ZW50JywKICAgICAgICAgICAgICAgICBhcmNoaXZlX3VybD0nJyk6CiAgICAiIiJPcGVuIGEgZmlsZS9vYmplY3QgYXJjaGl2ZSBpbnRvIGEgdGFyZ2V0IGRpcmVjdG9yeSIiIgogICAgICAgIAogICAgb3MubWFrZWRpcnModGFyZ2V0X2RpciwgZXhpc3Rfb2s9VHJ1ZSkKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oJ1ZlcmlmaWVkIGRpcmVjdG9yaWVzJykKICAgIAogICAgY29udGV4dC5sb2dnZXIuaW5mbygnRXh0cmFjdGluZyB6aXAnKQogICAgemlwX3JlZiA9IHppcGZpbGUuWmlwRmlsZShhcmNoaXZlX3VybCwgJ3InKQogICAgemlwX3JlZi5leHRyYWN0YWxsKHRhcmdldF9kaXIpCiAgICB6aXBfcmVmLmNsb3NlKCkKICAgIAogICAgY29udGV4dC5sb2dnZXIuaW5mbyhmJ2V4dHJhY3RlZCBhcmNoaXZlIHRvIHt0YXJnZXRfZGlyfScpCiAgICBjb250ZXh0LmxvZ19hcnRpZmFjdCgnY29udGVudCcsIHRhcmdldF9wYXRoPXRhcmdldF9kaXIpCgogICAgCmZyb20gbWxydW4uYXJ0aWZhY3RzIGltcG9ydCBUYWJsZUFydGlmYWN0CgpkZWYgY2F0ZWdvcmllc19tYXBfYnVpbGRlcihjb250ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VfZGlyLAogICAgICAgICAgICAgICAgICAgICAgICAgICBkZl9maWxlbmFtZT0nZmlsZV9jYXRlZ29yaWVzX2RmLmNzdicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcF9maWxlbmFtZT0nY2F0ZWdvcmllc19tYXAuanNvbicpOgogICAgIiIiUmVhZCBsYWJlbGVkIGltYWdlcyBmcm9tIGEgZGlyZWN0b3J5IGFuZCBjcmVhdGUgY2F0ZWdvcnkgbWFwICsgZGYKICAgIAogICAgZmlsZW5hbWUgZm9ybWF0OiA8Y2F0ZWdvcnk+Lk5OLmpwZyIiIgogICAgCiAgICBmaWxlbmFtZXMgPSBbZmlsZSBmb3IgZmlsZSBpbiBvcy5saXN0ZGlyKHNvdXJjZV9kaXIpIGlmIGZpbGUuZW5kc3dpdGgoJy5qcGcnKV0KICAgIGNhdGVnb3JpZXMgPSBbXQogICAgICAgIAogICAgZm9yIGZpbGVuYW1lIGluIGZpbGVuYW1lczoKICAgICAgICBjYXRlZ29yeSA9IGZpbGVuYW1lLnNwbGl0KCcuJylbMF0KICAgICAgICBjYXRlZ29yaWVzLmFwcGVuZChjYXRlZ29yeSkKCiAgICBkZiA9IHBkLkRhdGFGcmFtZSh7CiAgICAgICAgJ2ZpbGVuYW1lJzogZmlsZW5hbWVzLAogICAgICAgICdjYXRlZ29yeSc6IGNhdGVnb3JpZXMKICAgIH0pCiAgICBkZlsnY2F0ZWdvcnknXSA9IGRmWydjYXRlZ29yeSddLmFzdHlwZSgnc3RyJykKICAgIAogICAgY2F0ZWdvcmllcyA9IGRmLmNhdGVnb3J5LnVuaXF1ZSgpCiAgICBjYXRlZ29yaWVzID0ge2k6IGNhdGVnb3J5IGZvciBpLCBjYXRlZ29yeSBpbiBlbnVtZXJhdGUoY2F0ZWdvcmllcyl9CiAgICB3aXRoIG9wZW4ob3MucGF0aC5qb2luKGNvbnRleHQub3V0X3BhdGgsIG1hcF9maWxlbmFtZSksICd3JykgYXMgZjoKICAgICAgICBmLndyaXRlKGpzb24uZHVtcHMoY2F0ZWdvcmllcykpCiAgICAgICAgCiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGNhdGVnb3JpZXMpCiAgICBjb250ZXh0LmxvZ19hcnRpZmFjdCgnY2F0ZWdvcmllc19tYXAnLCBzcmNfcGF0aD1tYXBfZmlsZW5hbWUpCiAgICBjb250ZXh0LmxvZ19hcnRpZmFjdChUYWJsZUFydGlmYWN0KCdmaWxlX2NhdGVnb3JpZXMnLCBkZj1kZiwgc3JjX3BhdGg9ZGZfZmlsZW5hbWUpKQoK
    commands: []
    code_origin: https://github.com/mlrun/demo-image-classification#e3d7f97f99a936a5513a8eb4c8854b3c6cae8bc5:../py/utils.py
